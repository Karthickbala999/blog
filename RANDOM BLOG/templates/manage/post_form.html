{% extends 'base.html' %}

{% block title %}{% if mode == 'edit' %}Edit Post{% else %}New Post{% endif %} Â· Manage{% endblock %}

{% block content %}
<div class="card">
  <h2>{% if mode == 'edit' %}Edit Post{% else %}New Post{% endif %}</h2>
  <form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    {% if form.non_field_errors %}
      <div class="alert-error">
        {{ form.non_field_errors }}
      </div>
    {% endif %}
    <div class="form-row">
      {{ form.title.label_tag }}
      {{ form.title }}
      {{ form.title.errors }}
    </div>
    <div class="form-row">
      {{ form.slug.label_tag }}
      {{ form.slug }}
      {% if form.slug.help_text %}
        <small class="help-text">{{ form.slug.help_text }}</small>
      {% endif %}
      {{ form.slug.errors }}
    </div>
    <div class="form-row">
      {{ form.image.label_tag }}
      {{ form.image }}
      {% if form.instance.image %}
        <div class="image-preview">
          <img src="{{ form.instance.image.url }}" alt="Current image" />
        </div>
      {% endif %}
      {{ form.image.errors }}
    </div>
    <div class="form-row">
      {{ form.body.label_tag }}
      {{ form.body }}
      {{ form.body.errors }}
    </div>
    <div class="form-row">
      <label>{{ form.published }} Published</label>
      {{ form.published.errors }}
    </div>
    <button type="submit">{% if mode == 'edit' %}Save{% else %}Create{% endif %}</button>
    <a href="{% url 'manage_dashboard' %}" class="nav-link" style="margin-left:8px">Cancel</a>
  </form>
</div>
{% endblock %}

